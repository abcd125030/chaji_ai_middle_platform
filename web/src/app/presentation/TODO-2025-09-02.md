# TODO List - 2025-09-02

## 新Pagtive功能缺失分析

### 背景描述
通过对比旧版Pagtive功能和新版实现，结合后端已有服务能力，分析出新版本在页面功能层面的不足之处。

### 功能缺失清单

#### 1. 项目管理功能
- [x] 实现项目克隆/复制功能 - 后端支持`clone`接口（views.py:352），但前端未实现
- [ ] 实现项目版本管理 - 数据模型有`version_id`字段，但前端无版本控制界面

#### 2. 页面编辑功能
- [ ] 实现页面历史记录 - 旧版有history API（/api/projects/[projectId]/pages/[pageId]/history.ts），新版未实现
- [ ] 实现页面版本回滚 - 无法查看和恢复之前的页面版本
- [ ] 实现批量页面操作 - 无法批量删除、移动或复制页面

#### 3. 文件和资源管理
- [ ] 完成文件上传功能 - new/page.tsx:84-88显示文件上传功能仅有TODO注释
- [ ] 实现资源管理器 - 无法管理已上传的图片和文件
- [ ] 实现草稿自动保存 - 旧版v2/new.tsx实现了IndexedDB草稿保存，新版缺失

#### 4. 预览和分享功能
- [ ] 完善预览功能 - 有preview路由但功能不完整
- [ ] 增强分享功能 - 只有基础分享，缺少分享设置（密码保护、有效期等）
- [ ] 实现发布管理 - 后端支持`is_published`状态，前端未实现发布流程

#### 5. 项目设置和配置
- [ ] 实现设置页面 - settings/page.tsx路由存在但内容未实现
- [ ] 实现全局样式管理 - 后端支持`global_style_code`，前端无对应配置界面
- [ ] 实现项目元数据编辑 - 无法修改项目描述、标签等信息

#### 6. 用户体验功能
- [ ] 添加操作确认对话框 - 删除等危险操作缺少二次确认
- [ ] 实现撤销/重做功能 - 编辑操作无法撤销
- [ ] 添加键盘快捷键 - 无快捷操作支持
- [ ] 实现搜索和筛选 - 项目列表无搜索、排序、筛选功能

#### 7. 协作功能
- [ ] 实现项目权限管理 - 无法设置协作者权限
- [ ] 实现评论系统 - 无法对页面进行评论和反馈
- [ ] 实现实时协作 - 多人编辑时无实时同步

#### 8. 数据和分析
- [ ] 实现使用统计 - 无页面访问统计
- [ ] 实现LLM调用日志查看 - 后端记录了LLM日志但前端无查看界面
- [ ] 实现项目分析仪表板 - 旧版admin有analytics功能，新版缺失

### 优先级建议
**高优先级（应立即实现）：**
1. 文件上传功能完成
2. 页面历史和版本管理
3. 项目设置页面实现
4. 发布和分享功能完善

**中优先级（核心功能完成后实现）：**
1. 项目克隆/复制功能
2. 草稿自动保存
3. 搜索和筛选功能
4. 操作确认对话框

**低优先级（后续迭代）：**
1. 协作功能
2. 数据分析仪表板
3. 评论系统
4. 实时协作

### 相关文件
- `/Users/chagee/Repos/X/backend/webapps/pagtive/views.py:352` - 后端clone接口
- `/Users/chagee/Repos/X/.old_pagtive/src/pages/api/projects/[projectId]/pages/[pageId]/history.ts` - 旧版历史记录API
- `/Users/chagee/Repos/X/.old_pagtive/src/pages/v2/new.tsx:150-200` - 旧版草稿保存实现
- `/Users/chagee/Repos/X/web/src/app/pagtive/projects/new/page.tsx:84-88` - 文件上传TODO
- `/Users/chagee/Repos/X/backend/webapps/pagtive/models.py` - 数据模型定义